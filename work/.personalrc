export PATH="$HOME/go/bin:$HOME/istio/bin:/usr/local/go/bin:$HOME/.gloo/bin:$HOME/.local/bin:${KREW_ROOT:-$HOME/.krew}/bin:$HOME/.gloo-mesh/bin:$PATH"

eval "$(starship init bash)"

alias ac="docker run -it --rm -v ${HOME}:/work -w /work --entrypoint /bin/sh amazon/aws-cli:latest"
alias rd="ssh 172.17.243.2 sudo pihole restartdns"
alias k="kubectl"
alias g="glooctl"
alias kgp="kubectl get pod"
alias kgn="kubectl get nodes"
alias kd="kubectl describe"
alias kail="kubectl logs -f"
alias ka="kubectl apply"
alias kdel="kubectl delete"
alias c="code ."
alias ins="instruqt"
alias i="istioctl"
alias w1="watch -d -n 1"
alias kflat="kubectl config view --flatten > /tmp/kubeconfig && mv /tmp/kubeconfig $HOME/.kube/config"
function kflatall() {
  update_kubeconfig
  kflat
  export KUBECONFIG=$HOME/.kube/config
  chmod 600 $HOME/.kube/config
}
function kns() {
  kubectl config set-context --current --namespace=$1
}
function gssh() {
  vm=$1
  shift
  ip=$(gcloud compute instances list --filter="name=('$vm')" --format=json | jq -r .[0].networkInterfaces[0].accessConfigs[0].natIP)
  ssh $ip $*
}
function update_kubeconfig() {
  DEFAULT_KUBECONFIG_FILE="$HOME/.kube/config"
  if test -f "${DEFAULT_KUBECONFIG_FILE}"
  then
    export KUBECONFIG="$DEFAULT_KUBECONFIG_FILE"
  fi
  # Your additional kubeconfig files should be inside ~/.kube/config-files
  ADD_KUBECONFIG_FILES="$HOME/.kube/config-files"
  mkdir -p "${ADD_KUBECONFIG_FILES}"
  OIFS="$IFS"
  IFS=$'\n'
  for kubeconfigFile in `find "${ADD_KUBECONFIG_FILES}" -type f -name "*.yml" -o -name "*.yaml"`
  do
    export KUBECONFIG="$kubeconfigFile:$KUBECONFIG"
  done
  IFS="$OIFS"
}
function kc() {
#  update_kubeconfig
  kubectx
}

export AWS_PROFILE=work
#cd $HOME
#update_kubeconfig
source $HOME/.gloorc
source <(kubectl completion bash)
complete -F __start_kubectl k
complete -F __start_kubectl kail

. "$HOME/.local/google-cloud-sdk/path.bash.inc"
. "$HOME/.local/google-cloud-sdk/completion.bash.inc"
